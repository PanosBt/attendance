<%- include('header', {title: 'Δήλωση Παρουσίας', full_width: true}) %>

<div class="text-center">
    <h4>Δήλωση Παρουσίας</h4>
    <span>Μάθημα: <%= course.name %></span>
</div>

<h5 class="text-center mb-4">Αίθουσα: <%=room.name %></h5>

<div id="declare_attendance_room"
    data-selected_seat_index="" data-cid="<%= course.id %>" data-arid="<%= attendance_registry_record.id %>">
    <% room.layout.forEach((seatsCount, ix) => { %>
        <div class="room_row_container border-bottom-0">
            <% if (seatsCount > 0) { %>
                    <div class="room_row ii__room_row">
                        <% for (let iy=0; iy < seatsCount; iy++) {
                            let seatIndex = `${ix}_${iy}`;
                            let isOccupied = typeof occupied_seats[seatIndex] !== 'undefined';
                        %>
                            <div
                                class="seat_container
                                <%= (isOccupied ? ' occupied' : '' ) %>
                                <%= (already_declared_seat == seatIndex ? ' selected' : '') %>
                                <%= (!isOccupied && attendance_registry_record.open ? ' selectable_room_seat_container ii__selectable_room_seat' : '') %>"
                                data-index="<%= seatIndex %>"
                            >
                                <div class="seat_square">
                                    <span>Σ&colon;<%= ix + 1 %></span>
                                    <span>Θ&colon;<%= iy + 1 %></span>
                                </div>
                            </div>
                        <% } %>
                    </div>

            <% } else { %>
                <div class="room_row_container border-bottom-0">
                    <div class="room_row empty_row_container">
                        <div class="empty_row"></div>
                    </div>
            <% } %>
        </div>
    <% }) %>

    <div class="d-flex justify-content-end">
        <% if (already_declared_seat) { %>
            <span>Έχετε ήδη δηλώσει παρουσία σε αυτό το μάθημα σήμερα!</span>
        <% } else if (!attendance_registry_record.open) { %>
            <span>Η δήλωση παρουσιών δεν έχει ανοίξει ακόμη απ' τον/την διδάσκων/διδάσκουσα.</span>
         <% } else { %>
                <button id="declare_attendance_btn" class="btn btn-primary" disabled>
                    ΔΗΛΩΣΗ ΠΑΡΟΥΣΙΑΣ
                </button>
        <% } %>
    </div>
</div>

<%- include('footer') %>
